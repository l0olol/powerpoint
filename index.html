<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PowerPoint Folien Shop</title>
  <style>
    /* ... Dein vollständiges CSS aus der Originaldatei bleibt unverändert ... */
  </style>
</head>
<body>
  <div class="container">
    <h1>🎨 PowerPoint Folien Shop</h1>

    <form id="orderForm">
      <div class="section">
        <h2>📊 Anzahl Folien wählen</h2>
        <div class="button-group">
          <button type="button" class="price-btn" data-slides="5" data-price="3">5 Folien<br><strong>3€</strong></button>
          <button type="button" class="price-btn" data-slides="10" data-price="5">10 Folien<br><strong>5€</strong></button>
          <button type="button" class="price-btn" data-slides="15" data-price="8">15+ Folien<br><strong>8€</strong></button>
        </div>
      </div>

      <div class="section">
        <h2>⭐ Qualitätsstufe wählen</h2>
        <div class="button-group">
          <button type="button" class="quality-btn" data-quality="1" data-price="0">Stufe 1<br><strong>+0€</strong></button>
          <button type="button" class="quality-btn" data-quality="2" data-price="1">Stufe 2<br><strong>+1€</strong></button>
          <button type="button" class="quality-btn" data-quality="3" data-price="2">Stufe 3<br><strong>+2€</strong></button>
        </div>
      </div>

      <div class="section">
        <h2>📝 Ihre Daten</h2>
        <div class="form-group">
          <label for="name">Name *</label>
          <input type="text" id="name" name="name" required />
        </div>

        <div class="form-group">
          <label for="email">E-Mail Adresse *</label>
          <input type="email" id="email" name="email" required />
        </div>

        <div class="form-group">
          <label for="description">Beschreibung der gewünschten Folien *</label>
          <textarea id="description" name="description" required></textarea>
        </div>
      </div>

      <div class="total-price" id="totalPrice">Gesamtpreis: 0€</div>

      <button type="submit" class="submit-btn" id="submitBtn" disabled>Bestellung absenden</button>
    </form>

    <div id="status" class="status" style="display: none;"></div>
  </div>

  <script>
    let selectedSlides = 0;
    let selectedQuality = 0;
    let slidesPrice = 0;
    let qualityPrice = 0;

    function updateTotalPrice() {
      const total = slidesPrice + qualityPrice;
      document.getElementById('totalPrice').textContent = `Gesamtpreis: ${total}€`;

      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const description = document.getElementById('description').value.trim();

      const canSubmit = selectedSlides > 0 && selectedQuality > 0 && name && email && description;
      document.getElementById('submitBtn').disabled = !canSubmit;
    }

    document.querySelectorAll('.price-btn').forEach(btn => {
      btn.addEventListener('click', function () {
        document.querySelectorAll('.price-btn').forEach(b => b.classList.remove('selected'));
        this.classList.add('selected');
        selectedSlides = parseInt(this.dataset.slides);
        slidesPrice = parseInt(this.dataset.price);
        updateTotalPrice();
      });
    });

    document.querySelectorAll('.quality-btn').forEach(btn => {
      btn.addEventListener('click', function () {
        document.querySelectorAll('.quality-btn').forEach(b => b.classList.remove('selected'));
        this.classList.add('selected');
        selectedQuality = parseInt(this.dataset.quality);
        qualityPrice = parseInt(this.dataset.price);
        updateTotalPrice();
      });
    });

    document.querySelectorAll('input, textarea').forEach(input => {
      input.addEventListener('input', updateTotalPrice);
    });

    document.getElementById('orderForm').addEventListener('submit', async function (e) {
      e.preventDefault();

      const submitBtn = document.getElementById('submitBtn');
      const status = document.getElementById('status');
      submitBtn.disabled = true;
      submitBtn.textContent = 'Wird gesendet...';

      const formData = {
        name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                description: document.getElementById('description').value,
                slides: selectedSlides,
                quality: selectedQuality,
                totalPrice: slidesPrice + qualityPrice,
                timestamp: new Date().toLocaleString('de-DE')
            };
            
            try {
                // Create info.txt content
                const infoData = `${formData.timestamp} | ${formData.name} | ${formData.email} | ${formData.slides} Folien | Qualität ${formData.quality} | ${formData.totalPrice}€ | ${formData.description}\n`;
                
                // Save to info.txt file
                await saveToInfoFile(infoData, formData);
                
                status.className = 'status success';
                status.textContent = '✅ Bestellung erfolgreich gespeichert! Die info.txt Datei wurde heruntergeladen.';
                status.style.display = 'block';
                
                // Reset form
                document.getElementById('orderForm').reset();
                document.querySelectorAll('.selected').forEach(btn => btn.classList.remove('selected'));
                selectedSlides = 0;
                selectedQuality = 0;
                slidesPrice = 0;
                qualityPrice = 0;
                updateTotalPrice();
                
            } catch (error) {
                status.className = 'status error';
                status.textContent = '❌ Fehler beim Speichern. Bitte versuchen Sie es erneut.';
                status.style.display = 'block';
            }
            
            // Re-enable submit button
            submitBtn.disabled = false;
            submitBtn.textContent = 'Bestellung absenden';
        });
